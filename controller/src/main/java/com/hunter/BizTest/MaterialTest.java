package com.hunter.BizTest;

import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.TypeReference;
import com.google.common.collect.Lists;
import org.apache.commons.collections.CollectionUtils;
import org.apache.commons.lang3.StringUtils;
import org.apache.commons.lang3.math.NumberUtils;

import java.util.Comparator;
import java.util.List;
import java.util.ListIterator;
import java.util.Set;
import java.util.stream.Collectors;

/**
 * @description:
 * @author: hunter.yang
 * @date: 20201228 16:01
 */
public class MaterialTest {


    private static MaterialClassicPidOrBrandLinkArticle setArticle(MaterialClassicAddLinkReq addLinkReq) {

//        getArticleInfo(addLinkReq);

        if (NumberUtils.INTEGER_ONE.equals(addLinkReq.getType())) {
            return MaterialClassicPidOrBrandLinkArticle.builder()
                    .type(addLinkReq.getType())
                    .pid(addLinkReq.getPid())
                    .articleId(addLinkReq.getArticleId())
                    .build();
        } else if (NumberUtils.INTEGER_TWO.equals(addLinkReq.getType())){
            return MaterialClassicPidOrBrandLinkArticle.builder()
                    .type(addLinkReq.getType())
                    .bid(addLinkReq.getBid())
                    .uid(addLinkReq.getUid())
                    .articleId(addLinkReq.getArticleId())
                    .build();
        }
        return null;
    }

    public static void main(String[] args) {

        String conf = "[{\"categoryId\":1,\"categoryName\":\"精选\",\"subCategories\":[{\"categoryIdSec\":100,\"categoryIdSecName\":\"全部\",\"pidOrBrandLinkArticles\":[{\"articleId\":209,\"featured\":false,\"pid\":15942369,\"sortId\":5,\"type\":1},{\"articleId\":187,\"featured\":false,\"pid\":15811465,\"sortId\":8,\"type\":1},{\"articleId\":215,\"featured\":false,\"pid\":17976932,\"sortId\":18,\"type\":1},{\"featured\":false,\"pid\":17206102,\"sortId\":12,\"type\":1},{\"featured\":false,\"pid\":17814507,\"sortId\":22,\"type\":1},{\"articleId\":210,\"featured\":false,\"pid\":17864303,\"sortId\":14,\"type\":1},{\"articleId\":214,\"featured\":false,\"pid\":13820444,\"sortId\":27,\"type\":1},{\"articleId\":196,\"featured\":false,\"pid\":14445231,\"sortId\":3,\"type\":1},{\"articleId\":193,\"featured\":false,\"pid\":12796981,\"sortId\":2,\"type\":1},{\"articleId\":198,\"featured\":false,\"pid\":14202562,\"sortId\":6,\"type\":1},{\"articleId\":233,\"featured\":false,\"pid\":15465964,\"sortId\":23,\"type\":1},{\"articleId\":246,\"featured\":false,\"pid\":16729614,\"sortId\":10,\"type\":1},{\"articleId\":234,\"featured\":false,\"pid\":16583066,\"sortId\":15,\"type\":1},{\"articleId\":204,\"featured\":false,\"pid\":15089120,\"sortId\":1,\"type\":1},{\"featured\":false,\"pid\":17990592,\"sortId\":9,\"type\":1},{\"featured\":false,\"pid\":12837259,\"sortId\":24,\"type\":1},{\"articleId\":252,\"featured\":false,\"pid\":12485447,\"sortId\":19,\"type\":1},{\"articleId\":195,\"featured\":false,\"pid\":17062364,\"sortId\":13,\"type\":1},{\"articleId\":236,\"featured\":false,\"pid\":14464227,\"sortId\":25,\"type\":1},{\"articleId\":247,\"featured\":false,\"pid\":16734856,\"sortId\":16,\"type\":1},{\"articleId\":235,\"featured\":false,\"pid\":16756480,\"sortId\":29,\"type\":1},{\"articleId\":205,\"featured\":false,\"pid\":16148520,\"sortId\":7,\"type\":1},{\"articleId\":149,\"featured\":false,\"pid\":16188742,\"sortId\":4,\"type\":1},{\"articleId\":231,\"featured\":false,\"pid\":16478845,\"sortId\":17,\"type\":1},{\"articleId\":206,\"featured\":false,\"pid\":17157950,\"sortId\":20,\"type\":1},{\"articleId\":207,\"featured\":false,\"pid\":14259699,\"sortId\":11,\"type\":1},{\"articleId\":202,\"featured\":false,\"pid\":15393263,\"sortId\":21,\"type\":1},{\"articleId\":238,\"featured\":false,\"pid\":13631602,\"sortId\":26,\"type\":1},{\"articleId\":239,\"featured\":false,\"pid\":17966873,\"sortId\":28,\"type\":1},{\"articleId\":251,\"featured\":false,\"pid\":15891910,\"sortId\":30,\"type\":1},{\"articleId\":241,\"featured\":false,\"pid\":16438750,\"sortId\":31,\"type\":1},{\"articleId\":242,\"featured\":false,\"pid\":17063081,\"sortId\":32,\"type\":1}]}]},{\"categoryId\":2,\"categoryName\":\"母婴\",\"subCategories\":[{\"categoryIdSec\":700,\"categoryIdSecName\":\"全部\",\"pidOrBrandLinkArticles\":[{\"articleId\":209,\"featured\":false,\"pid\":15942369,\"sortId\":1,\"type\":1},{\"articleId\":187,\"featured\":false,\"pid\":15811465,\"sortId\":2,\"type\":1},{\"articleId\":215,\"featured\":false,\"pid\":17976932,\"sortId\":3,\"type\":1},{\"featured\":false,\"pid\":14075830,\"sortId\":4,\"type\":1},{\"featured\":false,\"pid\":17413629,\"sortId\":5,\"type\":1},{\"featured\":false,\"pid\":17866902,\"sortId\":6,\"type\":1},{\"featured\":false,\"pid\":13047197,\"sortId\":7,\"type\":1},{\"featured\":false,\"pid\":17976980,\"sortId\":8,\"type\":1},{\"featured\":false,\"pid\":17206102,\"sortId\":9,\"type\":1},{\"featured\":false,\"pid\":17814507,\"sortId\":10,\"type\":1},{\"featured\":false,\"pid\":17859368,\"sortId\":11,\"type\":1},{\"featured\":false,\"pid\":17803178,\"sortId\":12,\"type\":1},{\"articleId\":210,\"featured\":false,\"pid\":17864303,\"sortId\":13,\"type\":1},{\"articleId\":214,\"featured\":false,\"pid\":13820444,\"sortId\":14,\"type\":1},{\"featured\":false,\"pid\":16915513,\"sortId\":15,\"type\":1},{\"featured\":false,\"pid\":18018274,\"sortId\":16,\"type\":1},{\"featured\":false,\"pid\":16696377,\"sortId\":17,\"type\":1},{\"featured\":false,\"pid\":17237693,\"sortId\":18,\"type\":1},{\"featured\":false,\"pid\":17861483,\"sortId\":19,\"type\":1},{\"featured\":false,\"pid\":17861483,\"sortId\":20,\"type\":1},{\"featured\":false,\"pid\":16931817,\"sortId\":21,\"type\":1}]},{\"categoryIdSec\":701,\"categoryIdSecName\":\"奶纸\",\"pidOrBrandLinkArticles\":[{\"articleId\":209,\"featured\":false,\"pid\":15942369,\"sortId\":1,\"type\":1},{\"articleId\":187,\"featured\":false,\"pid\":15811465,\"sortId\":2,\"type\":1},{\"articleId\":215,\"featured\":false,\"pid\":17976932,\"sortId\":3,\"type\":1},{\"featured\":false,\"pid\":14075830,\"sortId\":4,\"type\":1},{\"featured\":false,\"pid\":17413629,\"sortId\":5,\"type\":1},{\"featured\":false,\"pid\":17866902,\"sortId\":6,\"type\":1},{\"featured\":false,\"pid\":13047197,\"sortId\":7,\"type\":1},{\"featured\":false,\"pid\":17976980,\"sortId\":8,\"type\":1}]},{\"categoryIdSec\":702,\"categoryIdSecName\":\"婴童用品\",\"pidOrBrandLinkArticles\":[{\"featured\":false,\"pid\":17206102,\"sortId\":1,\"type\":1},{\"featured\":false,\"pid\":17814507,\"sortId\":2,\"type\":1},{\"featured\":false,\"pid\":17859368,\"sortId\":3,\"type\":1},{\"featured\":false,\"pid\":17803178,\"sortId\":4,\"type\":1}]},{\"categoryIdSec\":703,\"categoryIdSecName\":\"玩具\",\"pidOrBrandLinkArticles\":[{\"articleId\":210,\"featured\":false,\"pid\":17864303,\"sortId\":1,\"type\":1},{\"articleId\":214,\"featured\":false,\"pid\":13820444,\"sortId\":2,\"type\":1},{\"featured\":false,\"pid\":16915513,\"sortId\":3,\"type\":1},{\"featured\":false,\"pid\":18018274,\"sortId\":4,\"type\":1},{\"featured\":false,\"pid\":16696377,\"sortId\":5,\"type\":1},{\"featured\":false,\"pid\":17237693,\"sortId\":6,\"type\":1},{\"featured\":false,\"pid\":17861483,\"sortId\":7,\"type\":1},{\"featured\":false,\"pid\":17861483,\"sortId\":8,\"type\":1},{\"featured\":false,\"pid\":16931817,\"sortId\":9,\"type\":1}]}]},{\"categoryId\":3,\"categoryName\":\"居家\",\"subCategories\":[{\"categoryIdSec\":300,\"categoryIdSecName\":\"全部\",\"pidOrBrandLinkArticles\":[{\"articleId\":196,\"featured\":false,\"pid\":14445231,\"sortId\":1,\"type\":1},{\"articleId\":193,\"featured\":false,\"pid\":12796981,\"sortId\":2,\"type\":1},{\"articleId\":198,\"featured\":false,\"pid\":14202562,\"sortId\":3,\"type\":1},{\"featured\":false,\"pid\":14126764,\"sortId\":4,\"type\":1},{\"featured\":false,\"pid\":15838762,\"sortId\":5,\"type\":1},{\"articleId\":233,\"featured\":false,\"pid\":15465964,\"sortId\":6,\"type\":1},{\"articleId\":246,\"featured\":false,\"pid\":16729614,\"sortId\":7,\"type\":1},{\"featured\":false,\"pid\":17987124,\"sortId\":8,\"type\":1},{\"articleId\":234,\"featured\":false,\"pid\":16583066,\"sortId\":9,\"type\":1},{\"articleId\":204,\"featured\":false,\"pid\":15089120,\"sortId\":10,\"type\":1},{\"articleId\":148,\"featured\":false,\"pid\":17990592,\"sortId\":11,\"type\":1},{\"featured\":false,\"pid\":12837259,\"sortId\":12,\"type\":1},{\"featured\":false,\"pid\":13621510,\"sortId\":13,\"type\":1},{\"articleId\":252,\"featured\":false,\"pid\":12485447,\"sortId\":14,\"type\":1},{\"featured\":false,\"pid\":17085175,\"sortId\":15,\"type\":1},{\"featured\":false,\"pid\":16673622,\"sortId\":16,\"type\":1},{\"featured\":false,\"pid\":17062364,\"sortId\":17,\"type\":1},{\"articleId\":236,\"featured\":false,\"pid\":14464227,\"sortId\":18,\"type\":1},{\"articleId\":247,\"featured\":false,\"pid\":16734856,\"sortId\":19,\"type\":1},{\"articleId\":235,\"featured\":false,\"pid\":16756480,\"sortId\":20,\"type\":1},{\"articleId\":217,\"bid\":20626,\"featured\":false,\"sortId\":21,\"type\":2,\"uid\":130021082},{\"articleId\":143,\"bid\":41964,\"featured\":false,\"sortId\":22,\"type\":2,\"uid\":127877400},{\"articleId\":219,\"bid\":50047,\"featured\":false,\"sortId\":23,\"type\":2,\"uid\":129304791},{\"articleId\":191,\"bid\":20517,\"featured\":false,\"sortId\":24,\"type\":2,\"uid\":128285319},{\"articleId\":218,\"bid\":48529,\"featured\":false,\"sortId\":25,\"type\":2,\"uid\":125441699},{\"articleId\":154,\"bid\":100356,\"featured\":false,\"sortId\":26,\"type\":2,\"uid\":136069099},{\"articleId\":237,\"bid\":48822,\"featured\":false,\"sortId\":27,\"type\":2,\"uid\":137874307},{\"articleId\":240,\"bid\":42957,\"featured\":false,\"sortId\":28,\"type\":2,\"uid\":126689210}]},{\"categoryIdSec\":801,\"categoryIdSecName\":\"生活家电\",\"pidOrBrandLinkArticles\":[{\"articleId\":196,\"featured\":false,\"pid\":14445231,\"sortId\":1,\"type\":1},{\"articleId\":193,\"featured\":false,\"pid\":12796981,\"sortId\":2,\"type\":1},{\"articleId\":198,\"featured\":false,\"pid\":14202562,\"sortId\":3,\"type\":1},{\"featured\":false,\"pid\":14126764,\"sortId\":4,\"type\":1},{\"featured\":false,\"pid\":15838762,\"sortId\":5,\"type\":1},{\"articleId\":233,\"featured\":false,\"pid\":15465964,\"sortId\":6,\"type\":1},{\"articleId\":246,\"featured\":false,\"pid\":16729614,\"sortId\":7,\"type\":1},{\"featured\":false,\"pid\":17987124,\"sortId\":8,\"type\":1},{\"articleId\":234,\"featured\":false,\"pid\":16583066,\"sortId\":9,\"type\":1}]},{\"categoryIdSec\":802,\"categoryIdSecName\":\"居家百货\",\"pidOrBrandLinkArticles\":[{\"articleId\":204,\"featured\":false,\"pid\":15089120,\"sortId\":1,\"type\":1},{\"articleId\":148,\"featured\":false,\"pid\":17990592,\"sortId\":2,\"type\":1},{\"featured\":false,\"pid\":12837259,\"sortId\":3,\"type\":1},{\"featured\":false,\"pid\":13621510,\"sortId\":4,\"type\":1},{\"articleId\":252,\"featured\":false,\"pid\":12485447,\"sortId\":5,\"type\":1},{\"featured\":false,\"pid\":17085175,\"sortId\":6,\"type\":1},{\"featured\":false,\"pid\":16673622,\"sortId\":7,\"type\":1},{\"articleId\":195,\"featured\":false,\"pid\":17062364,\"sortId\":8,\"type\":1},{\"articleId\":236,\"featured\":false,\"pid\":14464227,\"sortId\":9,\"type\":1},{\"articleId\":247,\"featured\":false,\"pid\":16734856,\"sortId\":10,\"type\":1},{\"articleId\":235,\"featured\":false,\"pid\":16756480,\"sortId\":11,\"type\":1}]},{\"categoryIdSec\":803,\"categoryIdSecName\":\"家纺\",\"pidOrBrandLinkArticles\":[{\"articleId\":217,\"bid\":20626,\"featured\":false,\"sortId\":1,\"type\":2,\"uid\":130021082},{\"articleId\":143,\"bid\":41964,\"featured\":false,\"sortId\":2,\"type\":2,\"uid\":127877400},{\"articleId\":219,\"bid\":50047,\"featured\":false,\"sortId\":3,\"type\":2,\"uid\":129304791},{\"articleId\":191,\"bid\":20517,\"featured\":false,\"sortId\":4,\"type\":2,\"uid\":128285319},{\"articleId\":218,\"bid\":48529,\"featured\":false,\"sortId\":5,\"type\":2,\"uid\":125441699},{\"articleId\":154,\"bid\":100356,\"featured\":false,\"sortId\":6,\"type\":2,\"uid\":136069099},{\"articleId\":237,\"bid\":48822,\"featured\":false,\"sortId\":7,\"type\":2,\"uid\":137874307},{\"articleId\":240,\"bid\":42957,\"featured\":false,\"sortId\":8,\"type\":2,\"uid\":126689210}]}]},{\"categoryId\":4,\"categoryName\":\"美妆\",\"subCategories\":[{\"categoryIdSec\":400,\"categoryIdSecName\":\"全部\",\"pidOrBrandLinkArticles\":[{\"articleId\":205,\"featured\":false,\"pid\":16148520,\"sortId\":1,\"type\":1},{\"articleId\":149,\"featured\":false,\"pid\":16188742,\"sortId\":2,\"type\":1},{\"articleId\":231,\"featured\":false,\"pid\":16478845,\"sortId\":3,\"type\":1},{\"articleId\":206,\"featured\":false,\"pid\":17157950,\"sortId\":4,\"type\":1},{\"articleId\":207,\"featured\":false,\"pid\":14259699,\"sortId\":5,\"type\":1},{\"articleId\":202,\"featured\":false,\"pid\":15393263,\"sortId\":6,\"type\":1},{\"featured\":false,\"pid\":13979615,\"sortId\":7,\"type\":1},{\"featured\":false,\"pid\":15836002,\"sortId\":8,\"type\":1},{\"featured\":false,\"pid\":16435982,\"sortId\":9,\"type\":1},{\"featured\":false,\"pid\":16435471,\"sortId\":10,\"type\":1},{\"featured\":false,\"pid\":13583258,\"sortId\":11,\"type\":1},{\"articleId\":238,\"featured\":false,\"pid\":13631602,\"sortId\":12,\"type\":1},{\"featured\":false,\"pid\":16435652,\"sortId\":13,\"type\":1},{\"featured\":false,\"pid\":17966873,\"sortId\":14,\"type\":1},{\"articleId\":251,\"featured\":false,\"pid\":15891910,\"sortId\":16,\"type\":1},{\"featured\":false,\"pid\":16201174,\"sortId\":17,\"type\":1},{\"articleId\":241,\"featured\":false,\"pid\":16438750,\"sortId\":18,\"type\":1},{\"articleId\":242,\"featured\":false,\"pid\":17063081,\"sortId\":19,\"type\":1},{\"featured\":false,\"pid\":15475837,\"sortId\":20,\"type\":1}]}]},{\"categoryId\":5,\"categoryName\":\"女装\",\"subCategories\":[{\"categoryIdSec\":500,\"categoryIdSecName\":\"全部\",\"pidOrBrandLinkArticles\":[{\"articleId\":211,\"bid\":99691,\"featured\":false,\"sortId\":1,\"type\":2,\"uid\":126868629},{\"articleId\":139,\"bid\":9635,\"featured\":false,\"sortId\":2,\"type\":2,\"uid\":89862091},{\"articleId\":213,\"bid\":100625,\"featured\":false,\"sortId\":3,\"type\":2,\"uid\":138709817},{\"articleId\":212,\"bid\":8699,\"featured\":false,\"sortId\":4,\"type\":2,\"uid\":134404602},{\"articleId\":164,\"bid\":49471,\"featured\":false,\"sortId\":5,\"type\":2,\"uid\":130426622},{\"articleId\":147,\"bid\":52321,\"featured\":false,\"sortId\":6,\"type\":2,\"uid\":128403383},{\"bid\":28273,\"featured\":false,\"sortId\":7,\"type\":2,\"uid\":1129718564},{\"bid\":99690,\"featured\":false,\"sortId\":8,\"type\":2,\"uid\":126868629},{\"bid\":25201,\"featured\":false,\"sortId\":9,\"type\":2,\"uid\":139474124},{\"articleId\":253,\"bid\":50014,\"featured\":false,\"sortId\":10,\"type\":2,\"uid\":127717395},{\"bid\":17158,\"featured\":false,\"sortId\":11,\"type\":2,\"uid\":128396440},{\"articleId\":230,\"bid\":8304,\"featured\":false,\"sortId\":12,\"type\":2,\"uid\":125683290},{\"articleId\":229,\"bid\":13883,\"featured\":false,\"sortId\":13,\"type\":2,\"uid\":125843918},{\"articleId\":254,\"bid\":20386,\"featured\":false,\"sortId\":14,\"type\":2,\"uid\":133678202},{\"bid\":8314,\"featured\":false,\"sortId\":15,\"type\":2,\"uid\":138904921},{\"articleId\":244,\"bid\":46166,\"featured\":false,\"sortId\":16,\"type\":2,\"uid\":125433103}]}]},{\"categoryId\":6,\"categoryName\":\"男装\",\"subCategories\":[{\"categoryIdSec\":600,\"categoryIdSecName\":\"全部\",\"pidOrBrandLinkArticles\":[{\"articleId\":183,\"bid\":25201,\"featured\":false,\"sortId\":1,\"type\":2,\"uid\":128762412},{\"articleId\":189,\"bid\":100359,\"featured\":false,\"sortId\":2,\"type\":2,\"uid\":125888722},{\"articleId\":181,\"bid\":28128,\"featured\":false,\"sortId\":3,\"type\":2,\"uid\":128912781},{\"articleId\":173,\"bid\":27802,\"featured\":false,\"sortId\":4,\"type\":2,\"uid\":129572777},{\"articleId\":172,\"bid\":28273,\"featured\":false,\"sortId\":5,\"type\":2,\"uid\":130179377},{\"bid\":99103,\"featured\":false,\"sortId\":6,\"type\":2,\"uid\":132190765},{\"bid\":11551,\"featured\":false,\"sortId\":7,\"type\":2,\"uid\":126914307},{\"bid\":52585,\"featured\":false,\"sortId\":8,\"type\":2,\"uid\":126846959},{\"bid\":100499,\"featured\":false,\"sortId\":9,\"type\":2,\"uid\":138670289},{\"bid\":3624,\"featured\":false,\"sortId\":10,\"type\":2,\"uid\":127730621},{\"bid\":47047,\"featured\":false,\"sortId\":11,\"type\":2,\"uid\":127353743}]}]},{\"categoryId\":7,\"categoryName\":\"童装\",\"subCategories\":[{\"categoryIdSec\":700,\"categoryIdSecName\":\"全部\",\"pidOrBrandLinkArticles\":[{\"articleId\":138,\"bid\":37,\"featured\":false,\"sortId\":1,\"type\":2,\"uid\":126199027},{\"articleId\":160,\"bid\":49496,\"featured\":false,\"sortId\":2,\"type\":2,\"uid\":128401671},{\"articleId\":161,\"bid\":7162,\"featured\":false,\"sortId\":3,\"type\":2,\"uid\":126199668},{\"articleId\":165,\"bid\":99047,\"featured\":false,\"sortId\":4,\"type\":2,\"uid\":138119932},{\"articleId\":184,\"bid\":43,\"featured\":false,\"sortId\":5,\"type\":2,\"uid\":135234472},{\"articleId\":186,\"bid\":7291,\"featured\":false,\"sortId\":6,\"type\":2,\"uid\":126148140},{\"bid\":1547,\"featured\":false,\"sortId\":7,\"type\":2,\"uid\":125377680},{\"articleId\":165,\"bid\":99047,\"featured\":false,\"sortId\":8,\"type\":2,\"uid\":138119932},{\"articleId\":227,\"bid\":40,\"featured\":false,\"sortId\":9,\"type\":2,\"uid\":139245659},{\"articleId\":184,\"bid\":43,\"featured\":false,\"sortId\":10,\"type\":2,\"uid\":135234472},{\"articleId\":186,\"bid\":7291,\"featured\":false,\"sortId\":11,\"type\":2,\"uid\":126148140},{\"articleId\":190,\"bid\":42,\"featured\":false,\"sortId\":12,\"type\":2,\"uid\":137743791},{\"articleId\":228,\"bid\":52854,\"featured\":false,\"sortId\":13,\"type\":2,\"uid\":135339825},{\"bid\":1547,\"featured\":false,\"sortId\":14,\"type\":2,\"uid\":125377680},{\"articleId\":227,\"bid\":40,\"featured\":false,\"sortId\":15,\"type\":2,\"uid\":139245659},{\"bid\":7196,\"featured\":false,\"sortId\":16,\"type\":2,\"uid\":128886111},{\"articleId\":232,\"bid\":99759,\"featured\":false,\"sortId\":17,\"type\":2,\"uid\":139104755},{\"bid\":1000,\"featured\":false,\"sortId\":18,\"type\":2,\"uid\":135190076},{\"bid\":2469,\"featured\":false,\"sortId\":19,\"type\":2,\"uid\":126466216},{\"bid\":110,\"featured\":false,\"sortId\":20,\"type\":2,\"uid\":135260015}]}]},{\"categoryId\":8,\"categoryName\":\"鞋靴\",\"subCategories\":[{\"categoryIdSec\":800,\"categoryIdSecName\":\"全部\",\"pidOrBrandLinkArticles\":[{\"articleId\":199,\"bid\":42316,\"featured\":false,\"sortId\":1,\"type\":2,\"uid\":125363025},{\"articleId\":145,\"bid\":19653,\"featured\":false,\"sortId\":2,\"type\":2,\"uid\":135554639},{\"articleId\":188,\"bid\":1691,\"featured\":false,\"sortId\":3,\"type\":2,\"uid\":127525300},{\"articleId\":192,\"bid\":8631,\"featured\":false,\"sortId\":4,\"type\":2,\"uid\":125458024},{\"articleId\":157,\"bid\":99675,\"featured\":false,\"sortId\":5,\"type\":2,\"uid\":137488758},{\"articleId\":226,\"bid\":102,\"featured\":false,\"sortId\":6,\"type\":2,\"uid\":133241101},{\"bid\":48718,\"featured\":false,\"sortId\":7,\"type\":2,\"uid\":126202766},{\"articleId\":243,\"bid\":10183,\"featured\":false,\"sortId\":8,\"type\":2,\"uid\":126158412}]}]},{\"categoryId\":9,\"categoryName\":\"运动\",\"subCategories\":[{\"categoryIdSec\":900,\"categoryIdSecName\":\"全部\",\"pidOrBrandLinkArticles\":[{\"articleId\":166,\"bid\":50038,\"featured\":false,\"sortId\":1,\"type\":2,\"uid\":129504793},{\"articleId\":222,\"bid\":4701,\"featured\":false,\"sortId\":2,\"type\":2,\"uid\":130778196},{\"articleId\":197,\"bid\":2844,\"featured\":false,\"sortId\":3,\"type\":2,\"uid\":138629544},{\"articleId\":194,\"bid\":50939,\"featured\":false,\"sortId\":4,\"type\":2,\"uid\":131422713},{\"articleId\":223,\"bid\":43103,\"featured\":false,\"sortId\":5,\"type\":2,\"uid\":130748377}]}]},{\"categoryId\":10,\"categoryName\":\"包配\",\"subCategories\":[{\"categoryIdSec\":1000,\"categoryIdSecName\":\"全部\",\"pidOrBrandLinkArticles\":[{\"articleId\":151,\"bid\":50762,\"featured\":false,\"sortId\":1,\"type\":2,\"uid\":131018857},{\"articleId\":200,\"bid\":20110,\"featured\":false,\"sortId\":2,\"type\":2,\"uid\":132251315},{\"articleId\":144,\"bid\":20108,\"featured\":false,\"sortId\":3,\"type\":2,\"uid\":131018857},{\"articleId\":216,\"bid\":100158,\"featured\":false,\"sortId\":4,\"type\":2,\"uid\":137789342},{\"articleId\":225,\"bid\":50805,\"featured\":false,\"sortId\":5,\"type\":2,\"uid\":131154591},{\"articleId\":220,\"bid\":7165,\"featured\":false,\"sortId\":6,\"type\":2,\"uid\":131359664},{\"articleId\":248,\"bid\":12436,\"featured\":false,\"sortId\":7,\"type\":2,\"uid\":125366451},{\"bid\":20470,\"featured\":false,\"sortId\":8,\"type\":2,\"uid\":134182044},{\"bid\":101018,\"featured\":false,\"sortId\":9,\"type\":2,\"uid\":131262453},{\"bid\":52382,\"featured\":false,\"sortId\":10,\"type\":2,\"uid\":131393025},{\"bid\":23969,\"featured\":false,\"sortId\":11,\"type\":2,\"uid\":129958563}]}]},{\"categoryId\":11,\"categoryName\":\"内衣\",\"subCategories\":[{\"categoryIdSec\":1100,\"categoryIdSecName\":\"全部\",\"pidOrBrandLinkArticles\":[{\"articleId\":201,\"bid\":13205,\"featured\":false,\"sortId\":1,\"type\":2,\"uid\":137795157},{\"articleId\":221,\"bid\":7283,\"featured\":false,\"sortId\":2,\"type\":2,\"uid\":127588226},{\"articleId\":146,\"bid\":12091,\"featured\":false,\"sortId\":3,\"type\":2,\"uid\":126658955},{\"articleId\":140,\"bid\":11192,\"featured\":false,\"sortId\":4,\"type\":2,\"uid\":129176404},{\"articleId\":158,\"bid\":6887,\"featured\":false,\"sortId\":5,\"type\":2,\"uid\":139147812},{\"articleId\":224,\"bid\":24074,\"featured\":false,\"sortId\":6,\"type\":2,\"uid\":138126273},{\"bid\":28128,\"featured\":false,\"sortId\":7,\"type\":2,\"uid\":128132074},{\"articleId\":249,\"bid\":13816,\"featured\":false,\"sortId\":8,\"type\":2,\"uid\":126222849}]}]},{\"categoryId\":12,\"categoryName\":\"女鞋\"}]";

        MaterialClassicSaveLinkReq saveLinkReq = new MaterialClassicSaveLinkReq();

        saveLinkReq.setJson("[{\"type\":2,\"pid\":\"\",\"uid\":137795157,\"bid\":13205,\"isFeatured\":false},{\"type\":2,\"pid\":\"\",\"uid\":127588226,\"bid\":7283,\"isFeatured\":false},{\"type\":2,\"pid\":\"\",\"uid\":126658955,\"bid\":12091,\"isFeatured\":false},{\"type\":2,\"pid\":\"\",\"uid\":129176404,\"bid\":11192,\"isFeatured\":false},{\"type\":2,\"pid\":\"\",\"uid\":139147812,\"bid\":6887,\"isFeatured\":false},{\"type\":2,\"pid\":\"\",\"uid\":138126273,\"bid\":24074,\"isFeatured\":false},{\"type\":2,\"pid\":\"\",\"uid\":128132074,\"bid\":28128,\"isFeatured\":false},{\"type\":2,\"pid\":\"\",\"uid\":126222849,\"bid\":13816,\"isFeatured\":false},{\"type\":1,\"pid\":\"17921553\",\"uid\":\"\",\"bid\":\"\",\"isFeatured\":false}]");
        saveLinkReq.setFirstCategoryId(11);
        saveLinkReq.setSecCategoryId(1100);


        if (StringUtils.isNotBlank(conf)) {
            List<MaterialClassicHotSaleVO> confs = JSON.parseObject(conf, new TypeReference<List<MaterialClassicHotSaleVO>>() {
            });


            MaterialClassicHotSaleVO materialClassicHotSaleVO = confs.stream().filter(b -> saveLinkReq.getFirstCategoryId().equals(b.getCategoryId())).findAny().orElse(null);
            if (null == materialClassicHotSaleVO) {
                System.out.println("此一级类目下没有匹配数据");
            }
            List<MaterialClassicSubCategory> subCategories = materialClassicHotSaleVO.getSubCategories();
            if (CollectionUtils.isNotEmpty(subCategories)) {
                MaterialClassicSubCategory subCategory = subCategories.stream().filter(a -> saveLinkReq.getSecCategoryId().equals(a.getCategoryIdSec())).findAny().orElse(null);
                if (null == subCategory) {
                    System.out.println("没有匹配此二级类目的数据");
                }
                List<MaterialClassicPidOrBrandLinkArticle> adds = JSON.parseObject(saveLinkReq.getJson(), new TypeReference<List<MaterialClassicPidOrBrandLinkArticle>>() {
                });

                // del subCategory

                ListIterator<MaterialClassicSubCategory> listIterator = subCategories.listIterator();

                while (listIterator.hasNext()) {
                    MaterialClassicSubCategory category = listIterator.next();

                    if (null != category && category.getCategoryIdSec().equals(subCategory.getCategoryIdSec())) {
                        category.setPidOrBrandLinkArticles(adds);
                    }
                }

                ListIterator<MaterialClassicHotSaleVO> confIterator = confs.listIterator();

                while (confIterator.hasNext()) {
                    MaterialClassicHotSaleVO materialClassicHotSale = confIterator.next();
                    if (null != materialClassicHotSale && materialClassicHotSale.getCategoryId().equals(saveLinkReq.getFirstCategoryId())) {
                        materialClassicHotSale.setSubCategories(subCategories);
                    }
                }

                System.out.println(JSON.toJSONString(confs));
            }
        }
    }
}
